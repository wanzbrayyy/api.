<div id="langModal" class="lang-modal-overlay">
    <div class="lang-modal">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3 style="margin: 0; display: flex; align-items: center; gap: 10px;">
                <i class="fa-solid fa-earth-americas" style="color: #3b82f6;"></i> <%= global.select_lang %>
            </h3>
            <button onclick="toggleLangModal()" style="background: none; border: none; color: #94a3b8; font-size: 1.5rem; cursor: pointer;">&times;</button>
        </div>
        <p style="color: #64748b; font-size: 0.9rem;"><%= global.select_lang_desc %></p>

        <div class="lang-grid">
            <% langList.forEach(lang => { %>
                <a href="/<%= lang.code %>/dashboard" class="lang-item <%= currentLang === lang.code ? 'active' : '' %>">
                    <i class="fa-solid <%= lang.icon %> lang-flag" style="color: <%= lang.color %>;"></i>
                    <span style="font-weight: 500;"><%= lang.name %></span>
                </a>
            <% }) %>
        </div>
    </div>
</div>

<script>
    function toggleLangModal() {
        const modal = document.getElementById('langModal');
        modal.classList.toggle('active');
    }

    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape") {
            const modal = document.getElementById('langModal');
            if (modal.classList.contains('active')) {
                modal.classList.remove('active');
            }
        }
    });

    document.getElementById('langModal').addEventListener('click', function(e) {
        if (e.target === this) {
            this.classList.remove('active');
        }
    });
</script>